<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.js"></script>
	<title>Panel principal del sistema</title>
	<meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />
	<!--     Fonts and icons     -->
	<link rel="stylesheet" type="text/css"
		href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />

	<!-- Bootstrap -->
	<link rel="stylesheet" href="/css/bootstrap.min.css" />
	<!-- Iconos Font Awesome -->
	<script src="https://kit.fontawesome.com/c49c6935a4.js" crossorigin="anonymous"></script>
	<!-- Nuestros estilos -->
	<link rel="stylesheet" href="/stylesheets/style.css" />

	<!-- Estilos de las tarjetas de los espacios curriculares -->
	<link rel="stylesheet" href="/stylesheets/cardsStyle.css" />

	<link rel="stylesheet" href="/stylesheets/datatable.css" />


	<link rel="stylesheet" href="/stylesheets/fresh-bootstrap-table.css" />
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
		integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
	<link href="http://fonts.googleapis.com/css?family=Roboto:400,700,300" rel="stylesheet" type="text/css">

	<!-- CSS Files -->
	<link href="/stylesheets/material-dashboard.css?v=2.1.2" rel="stylesheet" />
	<link href="/stylesheets/toastr.css" rel="stylesheet" />
	<!-- Animate css -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css" />
	<%- include('fragment/background'); -%>
</head>

<body>

	<%- include('fragment/sidebar'); -%>
	<div class="main-panel">
		<%- include('fragment/navbar'); -%>
		<!--  contenido   -->
		<div id="1" style="visibility: hidden"><%-username%></div>
		<h1 id="2" style="visibility: hidden"><%-toastrFlag%></h1>
		<div class="content">
			<div class="container-fluid">
				<!--Contenido principal acÃ¡ -->
				<div class="row">
					<div class="col-md-12">
						<div class="container fresh-table full-color-red">
							<table id="fresh-table" class="table">
								<thead>
									<th data-field="name" data-sortable="true">Nombre</th>
									<th data-field="surname" data-sortable="true">Apellido</th>
									<th data-field="birt">Fecha de nacimiento</th>
									<th data-field="legajo">legajo</th>
									<th data-field="email">email</th>
									<th data-field="telephone">telefono</th>
									<th data-field="genero">genero</th>
									<th data-field="actions" data-formatter="operateFormatter"
										data-events="operateEvents">
										Actions</th>
								</thead>
								<tbody>
									<% data.forEach(function(Student){ %>
									<tr>
										<td><%-Student['nombre']%></td>
										<td><%-Student['apellido']%></td>
										<td><%-Student['fecha_nacimiento']%></td>
										<td><%-Student['legajo']%></td>
										<td><%-Student['email']%></td>
										<td><%-Student['telefono']%></td>
										<td><%-Student['genero']%></td>
										<td></td>
									</tr>
									<% }); %>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- VENTANA EMERGENTE DE APRENDIZAJES EN PROCESO -->
		<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#hola" >
			Aprendizajes del Estudiante
		</button>

		<div class="modal fade bd-example-modal-lg" id="hola" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
			aria-hidden="true">
			<div class="modal-dialog modal-lg">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Aprendizajes</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div class="row">
							<div class="col-md-4">
								<div class="card text-white bg-danger mb-3" style="max-width: 18rem; top: -120px;">
                                    <div class="card-header">Pendiente</div>
                                    <div id="listPending"class="card-body">
                                        <% data2.forEach(function(Learnings){ %>
                                            <% if(Learnings['estado'] === "pendiente"){%>
                                                <div class="list-group-item">
                                                    <p class="fas fa-bars bg-danger mb-3"> <%-Learnings['descripcion']%> </p>
                                                </div>
                                            <% } %>
                                        <% }); %>
                                    </div>
                                </div>
							</div>
							<div class="col-md-4">
								<div class="card text-white bg-danger mb-3" style="max-width: 18rem; top: -120px;">
                                    <div class="card-header">Proceso</div>
                                    <div id="listProgress"class="card-body">
                                        <% data2.forEach(function(Learnings){ %>
                                            <% if(Learnings['estado'] === "proceso"){%>
                                                <div class="list-group-item">
                                                    <p class="fas fa-bars bg-danger mb-3"> <%-Learnings['descripcion']%> </p>
                                                </div>
                                            <% } %>
                                        <% }); %>
                                    </div>
                                </div>
							</div>
							<div class="col-md-4">
								<div class="card text-white bg-danger mb-3" style="max-width: 18rem; top: -120px;">
                                    <div class="card-header">Pendiente</div>
                                    <div id="listApproved"class="card-body">
                                        <% data2.forEach(function(Learnings){ %>
                                            <% if(Learnings['estado'] === "aprobado"){%>
                                                <div class="list-group-item">
                                                    <p class="fas fa-bars bg-danger mb-3"> <%-Learnings['descripcion']%> </p>
                                                </div>
                                            <% } %>
                                        <% }); %>
                                    </div>
                                </div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<%- include('fragment/footer'); -%>
	</div>
	<%- include('fragment/scripts'); -%>
	<script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
	<script src="/javascripts/plugins/jquery-3.5.1.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="https://unpkg.com/bootstrap-table/dist/bootstrap-table.min.js"></script>
	<script type="text/javascript">
		const listApproved = document.getElementById("listApproved");
		const listProgress = document.getElementById("listProgress");
		const listPending = document.getElementById("listPending");
		
		Sortable.create(listApproved, {
			group: {
				name: "statuslearning"
			},
			animation: 150,
			easing:"cubic-bezier(0.895,0.03,0.685,0.22)",
			store:{
				set: function(sortable){
					const order = sortable.toArray();
					localStorage.setItem('statusLearning',order.join('|'))
				},

				get: function(sortable){
					const order = localStorage.getItem('statusLearning');
					return order ? order.split('|') : [];
				}
			}
		});
		Sortable.create(listProgress, {
			group: {
				name: "statuslearning"
			},
			animation: 150,
			easing:"cubic-bezier(0.895,0.03,0.685,0.22)"
		});

		Sortable.create(listPending, {
			group: {
				name: "statuslearning"
			},
			animation: 150,
			easing:"cubic-bezier(0.895,0.03,0.685,0.22)"
		});
		
	</script>
	<script type="text/javascript">
		var $table = $('#fresh-table')
		var $alertBtn = $('#alertBtn')
		window.operateEvents = {
			'click .like': function (e, value, row, index) {
				alert('You click like icon, row: ' + JSON.stringify(row))
				console.log(value, row, index)
			},
			'click .edit': function (e, value, row, index) {

				alert('You click edit icon, row: ' + JSON.stringify(row))
				console.log(value, row, index)
			},
			'click .remove': function (e, value, row, index) {
				$table.bootstrapTable('remove', {
					field: 'id',
					values: [row.id]
				})
			}
		}

		function operateFormatter(value, row, index) {
			return [
				'<a rel="tooltip" title="Like" class="table-action like" href="javascript:void(0)" title="Like">',
				'<i class="fa fa-heart"></i>',
				'</a>',
				'<a rel="tooltip" title="Edit" class="table-action edit" href="javascript:void(0)" title="Edit">',
				'<i class="fa fa-edit"></i>',
				'</a>',
				'<a rel="tooltip" title="Remove" class="table-action remove" href="javascript:void(0)" title="Remove">',
				'<i class="fa fa-remove"></i>',
				'</a>'
			].join('')
		}
		$(function () {
			$table.bootstrapTable({
				classes: 'table table-hover table-striped',
				toolbar: '.toolbar',
				search: true,
				showRefresh: true,
				showToggle: true,
				showColumns: true,
				pagination: true,
				striped: true,
				sortable: true,
				pageSize: 8,
				pageList: [8, 10, 25, 50, 100],
				formatShowingRows: function (pageFrom, pageTo, totalRows) {
					return ''
				},
				formatRecordsPerPage: function (pageNumber) {
					return pageNumber + ' Filas visibles'
				}
			})
			$alertBtn.click(function () {
				alert('You pressed on Alert')
			})
		})
	</script>
</body>

</html>